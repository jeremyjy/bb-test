{
  "reportTitle": "bbcloud-monolithic",
  "stats": {
    "suites": 1,
    "tests": 1,
    "passes": 1,
    "pending": 0,
    "failures": 0,
    "start": "2016-06-23T09:01:42.390Z",
    "end": "2016-06-23T09:01:42.456Z",
    "duration": 66,
    "testsRegistered": 7,
    "passPercent": 14.3,
    "pendingPercent": 0,
    "other": 0,
    "hasOther": false,
    "skipped": 6,
    "hasSkipped": true,
    "passPercentClass": "danger",
    "pendingPercentClass": "danger"
  },
  "suites": {
    "title": "",
    "suites": [
      {
        "title": "微信测试",
        "suites": [],
        "tests": [],
        "pending": [],
        "root": false,
        "_timeout": 2000,
        "file": "/test/wechattest.js",
        "uuid": "2fb8e4a7-fd21-4aab-8447-1ca0ff639213",
        "fullFile": "/Users/JeremyNg/bbcloud-monolithic/test/wechattest.js",
        "passes": [],
        "failures": [],
        "skipped": [],
        "hasTests": false,
        "hasSuites": false,
        "totalTests": 0,
        "totalPasses": 0,
        "totalFailures": 0,
        "totalPending": 0,
        "totalSkipped": 0,
        "hasPasses": false,
        "hasFailures": false,
        "hasPending": false,
        "hasSkipped": false,
        "duration": 0
      },
      {
        "title": "配置信息",
        "suites": [],
        "tests": [
          {
            "title": "查询成功",
            "fullTitle": "配置信息 查询成功",
            "timedOut": false,
            "duration": 30,
            "state": "passed",
            "speed": "fast",
            "pass": true,
            "fail": false,
            "pending": false,
            "code": "request(baseUrl + <span class=\"hljs-string\">'/api/wechat/getJsApiConfig'</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">err, res, body</span>) </span>{<br>    expect(err).to.be.equal(<span class=\"hljs-literal\">null</span>);<br>    expect(res.statusCode).to.be.equal(<span class=\"hljs-number\">200</span>);<br>    done();<br>})",
            "isRoot": false,
            "uuid": "eb393598-ce3e-4a10-b7a3-fafe9fba6137",
            "parentUUID": "8e147a17-375d-46fd-a9cd-5fce4a406e34",
            "skipped": false
          }
        ],
        "pending": [],
        "root": false,
        "_timeout": 2000,
        "file": "/test/wechattest.js",
        "uuid": "8e147a17-375d-46fd-a9cd-5fce4a406e34",
        "fullFile": "/Users/JeremyNg/bbcloud-monolithic/test/wechattest.js",
        "passes": [
          {
            "title": "查询成功",
            "fullTitle": "配置信息 查询成功",
            "timedOut": false,
            "duration": 30,
            "state": "passed",
            "speed": "fast",
            "pass": true,
            "fail": false,
            "pending": false,
            "code": "request(baseUrl + <span class=\"hljs-string\">'/api/wechat/getJsApiConfig'</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">err, res, body</span>) </span>{<br>    expect(err).to.be.equal(<span class=\"hljs-literal\">null</span>);<br>    expect(res.statusCode).to.be.equal(<span class=\"hljs-number\">200</span>);<br>    done();<br>})",
            "isRoot": false,
            "uuid": "eb393598-ce3e-4a10-b7a3-fafe9fba6137",
            "parentUUID": "8e147a17-375d-46fd-a9cd-5fce4a406e34",
            "skipped": false
          }
        ],
        "failures": [],
        "skipped": [],
        "hasTests": true,
        "hasSuites": false,
        "totalTests": 1,
        "totalPasses": 1,
        "totalFailures": 0,
        "totalPending": 0,
        "totalSkipped": 0,
        "hasPasses": true,
        "hasFailures": false,
        "hasPending": false,
        "hasSkipped": false,
        "duration": 30
      }
    ],
    "tests": [
      {
        "title": "新增用户和绑定成功",
        "fullTitle": " 新增用户和绑定成功",
        "timedOut": false,
        "duration": 0,
        "pass": false,
        "fail": false,
        "pending": false,
        "code": "<span class=\"hljs-keyword\">var</span> xml = <span class=\"hljs-string\">\"&lt;xml&gt;&lt;URL&gt;&lt;![CDATA[http://test.tester.com/wechat/message]]&gt;&lt;/URL&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;ToUserName&gt;&lt;![CDATA[\"</span> + signature + <span class=\"hljs-string\">\"]]&gt;&lt;/ToUserName&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;FromUserName&gt;&lt;![CDATA[\"</span> + signature + <span class=\"hljs-string\">\"]]&gt;&lt;/FromUserName&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;CreateTime&gt;\"</span> + timestamp + <span class=\"hljs-string\">\"&lt;/CreateTime&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;MsgType&gt;&lt;![CDATA[device_event]]&gt;&lt;/MsgType&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;Event&gt;&lt;![CDATA[bind]]&gt;&lt;/Event&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;DeviceType&gt;&lt;![CDATA[\"</span> + signature + <span class=\"hljs-string\">\"]]&gt;&lt;/DeviceType&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;DeviceID&gt;&lt;![CDATA[\"</span> + config.deviceid + <span class=\"hljs-string\">\"]]&gt;&lt;/DeviceID&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;Content&gt;&lt;![CDATA[xxxxxxx]]&gt;&lt;/Content&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;SessionID&gt;123121&lt;/SessionID&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;OpenID&gt;&lt;![CDATA[\"</span> + signature + <span class=\"hljs-string\">\"]]&gt;&lt;/OpenID&gt;&lt;/xml&gt;\"</span>;<br><span class=\"hljs-keyword\">var</span> option = {<br>    url: url.resolve(baseUrl, <span class=\"hljs-string\">\"/wechat?signature=\"</span> + signature + <span class=\"hljs-string\">\"&amp;timestamp=\"</span> + timestamp + <span class=\"hljs-string\">\"&amp;nonce=\"</span> + nonce),<br>    body: xml<br>};<br>request.post(option, (err, res, body) =&gt; {<br>    expect(err).to.be.equal(<span class=\"hljs-literal\">null</span>);<br>    expect(res.statusCode).to.be.equal(<span class=\"hljs-number\">200</span>);<br>    expect(body).to.be.equal(<span class=\"hljs-string\">'create User and Bind success!'</span>);<br>    done();<br>});",
        "isRoot": true,
        "uuid": "6ba9b8b4-51e6-4494-9229-94f823c40e06",
        "parentUUID": "2cc8e5ad-aa14-4523-ac84-60b591e16cd7",
        "skipped": true
      },
      {
        "title": "已存在绑定关系",
        "fullTitle": " 已存在绑定关系",
        "timedOut": false,
        "duration": 0,
        "pass": false,
        "fail": false,
        "pending": false,
        "code": "<span class=\"hljs-keyword\">var</span> xml = <span class=\"hljs-string\">\"&lt;xml&gt;&lt;URL&gt;&lt;![CDATA[http://test.tester.com/wechat/message]]&gt;&lt;/URL&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;ToUserName&gt;&lt;![CDATA[\"</span> + signature + <span class=\"hljs-string\">\"]]&gt;&lt;/ToUserName&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;FromUserName&gt;&lt;![CDATA[\"</span> + signature + <span class=\"hljs-string\">\"]]&gt;&lt;/FromUserName&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;CreateTime&gt;\"</span> + timestamp + <span class=\"hljs-string\">\"&lt;/CreateTime&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;MsgType&gt;&lt;![CDATA[device_event]]&gt;&lt;/MsgType&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;Event&gt;&lt;![CDATA[bind]]&gt;&lt;/Event&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;DeviceType&gt;&lt;![CDATA[\"</span> + signature + <span class=\"hljs-string\">\"]]&gt;&lt;/DeviceType&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;DeviceID&gt;&lt;![CDATA[\"</span> + config.deviceid + <span class=\"hljs-string\">\"]]&gt;&lt;/DeviceID&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;Content&gt;&lt;![CDATA[xxxxxxx]]&gt;&lt;/Content&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;SessionID&gt;123121&lt;/SessionID&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;OpenID&gt;&lt;![CDATA[\"</span> + signature + <span class=\"hljs-string\">\"]]&gt;&lt;/OpenID&gt;&lt;/xml&gt;\"</span>;<br><span class=\"hljs-keyword\">var</span> option = {<br>    url: url.resolve(baseUrl, <span class=\"hljs-string\">\"/wechat?signature=\"</span> + signature + <span class=\"hljs-string\">\"&amp;timestamp=\"</span> + timestamp + <span class=\"hljs-string\">\"&amp;nonce=\"</span> + nonce),<br>    body: xml<br>};<br>request.post(option, (err, res, body) =&gt; {<br>    expect(err).to.be.equal(<span class=\"hljs-literal\">null</span>);<br>    expect(res.statusCode).to.be.equal(<span class=\"hljs-number\">500</span>);<br>    expect(body).to.be.equal(<span class=\"hljs-string\">'aleady binded!'</span>);<br>    done();<br>});",
        "isRoot": true,
        "uuid": "04fdceeb-b764-49f1-942a-8635b15eaab2",
        "parentUUID": "2cc8e5ad-aa14-4523-ac84-60b591e16cd7",
        "skipped": true
      },
      {
        "title": "缺少签名认证",
        "fullTitle": " 缺少签名认证",
        "timedOut": false,
        "duration": 0,
        "pass": false,
        "fail": false,
        "pending": false,
        "code": "<span class=\"hljs-keyword\">var</span> xml = <span class=\"hljs-string\">\"&lt;xml&gt;&lt;URL&gt;&lt;![CDATA[http://6f7930fa.ittun.com/wechat/message]]&gt;&lt;/URL&gt;&lt;ToUserName&gt;&lt;![CDATA[gh_9a0ccaa5f56d]]&gt;&lt;/ToUserName&gt;&lt;FromUserName&gt;&lt;![CDATA[xxxxxxx]]&gt;&lt;/FromUserName&gt;&lt;CreateTime&gt;123424235&lt;/CreateTime&gt;&lt;MsgType&gt;&lt;![CDATA[device_event]]&gt;&lt;/MsgType&gt;&lt;Event&gt;&lt;![CDATA[bind]]&gt;&lt;/Event&gt;&lt;DeviceType&gt;&lt;![CDATA[gh_9a0ccaa5f56d]]&gt;&lt;/DeviceType&gt;&lt;DeviceID&gt;&lt;![CDATA[gh_9a0ccaa5f56d_e0cf1c8d5aca1454]]&gt;&lt;/DeviceID&gt;&lt;Content&gt;&lt;![CDATA[xxxxxxx]]&gt;&lt;/Content&gt;&lt;SessionID&gt;123121&lt;/SessionID&gt;&lt;OpenID&gt;&lt;![CDATA[dsf23d2]]&gt;&lt;/OpenID&gt;&lt;/xml&gt;\"</span>;<br><span class=\"hljs-keyword\">var</span> option = {<br>    url: url.resolve(baseUrl, <span class=\"hljs-string\">\"/wechat?signature=\"</span> + signature + <span class=\"hljs-string\">\"&amp;timestamp=\"</span> + timestamp),<br>    body: xml<br>};<br>request.post(option, (err, res, body) =&gt; {<br>    expect(err).to.be.equal(<span class=\"hljs-literal\">null</span>);<br>    expect(res.statusCode).to.be.equal(<span class=\"hljs-number\">401</span>);<br>    done();<br>});",
        "isRoot": true,
        "uuid": "e2917f00-d7bd-4938-90a2-bd0195b01678",
        "parentUUID": "2cc8e5ad-aa14-4523-ac84-60b591e16cd7",
        "skipped": true
      },
      {
        "title": "解绑事件测试",
        "fullTitle": " 解绑事件测试",
        "timedOut": false,
        "duration": 0,
        "pass": false,
        "fail": false,
        "pending": false,
        "code": "<span class=\"hljs-keyword\">var</span> xml = <span class=\"hljs-string\">\"&lt;xml&gt;&lt;URL&gt;&lt;![CDATA[http://test.tester.com/wechat/message]]&gt;&lt;/URL&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;ToUserName&gt;&lt;![CDATA[\"</span> + signature + <span class=\"hljs-string\">\"]]&gt;&lt;/ToUserName&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;FromUserName&gt;&lt;![CDATA[\"</span> + signature + <span class=\"hljs-string\">\"]]&gt;&lt;/FromUserName&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;CreateTime&gt;\"</span> + timestamp + <span class=\"hljs-string\">\"&lt;/CreateTime&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;MsgType&gt;&lt;![CDATA[device_event]]&gt;&lt;/MsgType&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;Event&gt;&lt;![CDATA[unbind]]&gt;&lt;/Event&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;DeviceType&gt;&lt;![CDATA[\"</span> + signature + <span class=\"hljs-string\">\"]]&gt;&lt;/DeviceType&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;DeviceID&gt;&lt;![CDATA[\"</span> + config.deviceid + <span class=\"hljs-string\">\"]]&gt;&lt;/DeviceID&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;Content&gt;&lt;![CDATA[xxxxxxx]]&gt;&lt;/Content&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;SessionID&gt;123121&lt;/SessionID&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;OpenID&gt;&lt;![CDATA[\"</span> + signature + <span class=\"hljs-string\">\"]]&gt;&lt;/OpenID&gt;&lt;/xml&gt;\"</span>;<br><span class=\"hljs-keyword\">var</span> option = {<br>    url: url.resolve(baseUrl, <span class=\"hljs-string\">\"/wechat?signature=\"</span> + signature + <span class=\"hljs-string\">\"&amp;timestamp=\"</span> + timestamp + <span class=\"hljs-string\">\"&amp;nonce=\"</span> + nonce),<br>    body: xml<br>};<br>request.post(option, (err, res, body) =&gt; {<br>    expect(err).to.be.equal(<span class=\"hljs-literal\">null</span>);<br>    expect(res.statusCode).to.be.equal(<span class=\"hljs-number\">200</span>);<br>    expect(body).to.be.equal(<span class=\"hljs-string\">'unbind success!'</span>);<br>    done();<br>});",
        "isRoot": true,
        "uuid": "cdb1a0a1-0e35-45a5-832c-91b72af25c53",
        "parentUUID": "2cc8e5ad-aa14-4523-ac84-60b591e16cd7",
        "skipped": true
      },
      {
        "title": "解绑不存在的设备",
        "fullTitle": " 解绑不存在的设备",
        "timedOut": false,
        "duration": 0,
        "pass": false,
        "fail": false,
        "pending": false,
        "code": "<span class=\"hljs-keyword\">var</span> xml = <span class=\"hljs-string\">\"&lt;xml&gt;&lt;URL&gt;&lt;![CDATA[http://test.tester.com/wechat/message]]&gt;&lt;/URL&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;ToUserName&gt;&lt;![CDATA[\"</span> + signature + <span class=\"hljs-string\">\"]]&gt;&lt;/ToUserName&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;FromUserName&gt;&lt;![CDATA[\"</span> + signature + <span class=\"hljs-string\">\"]]&gt;&lt;/FromUserName&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;CreateTime&gt;\"</span> + timestamp + <span class=\"hljs-string\">\"&lt;/CreateTime&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;MsgType&gt;&lt;![CDATA[device_event]]&gt;&lt;/MsgType&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;Event&gt;&lt;![CDATA[unbind]]&gt;&lt;/Event&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;DeviceType&gt;&lt;![CDATA[\"</span> + signature + <span class=\"hljs-string\">\"]]&gt;&lt;/DeviceType&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;DeviceID&gt;&lt;![CDATA[\"</span> + signature + <span class=\"hljs-string\">\"]]&gt;&lt;/DeviceID&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;Content&gt;&lt;![CDATA[xxxxxxx]]&gt;&lt;/Content&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;SessionID&gt;123121&lt;/SessionID&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;OpenID&gt;&lt;![CDATA[\"</span> + signature + <span class=\"hljs-string\">\"]]&gt;&lt;/OpenID&gt;&lt;/xml&gt;\"</span>;<br><span class=\"hljs-keyword\">var</span> option = {<br>    url: url.resolve(baseUrl, <span class=\"hljs-string\">\"/wechat?signature=\"</span> + signature + <span class=\"hljs-string\">\"&amp;timestamp=\"</span> + timestamp + <span class=\"hljs-string\">\"&amp;nonce=\"</span> + nonce),<br>    body: xml<br>};<br>request.post(option, (err, res, body) =&gt; {<br>    expect(err).to.be.equal(<span class=\"hljs-literal\">null</span>);<br>    expect(res.statusCode).to.be.equal(<span class=\"hljs-number\">500</span>);<br>    expect(body).to.be.equal(<span class=\"hljs-string\">'no bund relation!'</span>);<br>    done();<br>});",
        "isRoot": true,
        "uuid": "184c398f-7058-4700-ad1c-9a00899a4a04",
        "parentUUID": "2cc8e5ad-aa14-4523-ac84-60b591e16cd7",
        "skipped": true
      },
      {
        "title": "解绑设备",
        "fullTitle": " 解绑设备",
        "timedOut": false,
        "duration": 0,
        "pass": false,
        "fail": false,
        "pending": false,
        "code": "<span class=\"hljs-keyword\">var</span> wechatAPI = <span class=\"hljs-keyword\">new</span> WeChatAPI(config.appid, config.appsecret);<br>wechatAPI.compelBindDevice(config.deviceid, config.openid, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">err</span>) </span>{<br>    expect(err).to.be.equal(<span class=\"hljs-literal\">null</span>);<br>    <span class=\"hljs-keyword\">var</span> xml = <span class=\"hljs-string\">\"&lt;xml&gt;&lt;URL&gt;&lt;![CDATA[http://test.tester.com/wechat/message]]&gt;&lt;/URL&gt;\"</span> +<br>        <span class=\"hljs-string\">\"&lt;ToUserName&gt;&lt;![CDATA[\"</span> + config.devicetype + <span class=\"hljs-string\">\"]]&gt;&lt;/ToUserName&gt;\"</span> +<br>        <span class=\"hljs-string\">\"&lt;FromUserName&gt;&lt;![CDATA[\"</span> + config.openid + <span class=\"hljs-string\">\"]]&gt;&lt;/FromUserName&gt;\"</span> +<br>        <span class=\"hljs-string\">\"&lt;CreateTime&gt;\"</span> + timestamp + <span class=\"hljs-string\">\"&lt;/CreateTime&gt;\"</span> +<br>        <span class=\"hljs-string\">\"&lt;MsgType&gt;&lt;![CDATA[device_event]]&gt;&lt;/MsgType&gt;\"</span> +<br>        <span class=\"hljs-string\">\"&lt;Event&gt;&lt;![CDATA[bind]]&gt;&lt;/Event&gt;\"</span> +<br>        <span class=\"hljs-string\">\"&lt;DeviceType&gt;&lt;![CDATA[\"</span> + config.devicetype + <span class=\"hljs-string\">\"]]&gt;&lt;/DeviceType&gt;\"</span> +<br>        <span class=\"hljs-string\">\"&lt;DeviceID&gt;&lt;![CDATA[\"</span> + config.deviceid + <span class=\"hljs-string\">\"]]&gt;&lt;/DeviceID&gt;\"</span> +<br>        <span class=\"hljs-string\">\"&lt;Content&gt;&lt;![CDATA[xxxxxxx]]&gt;&lt;/Content&gt;\"</span> +<br>        <span class=\"hljs-string\">\"&lt;SessionID&gt;123121&lt;/SessionID&gt;\"</span> +<br>        <span class=\"hljs-string\">\"&lt;OpenID&gt;&lt;![CDATA[\"</span> + config.openid + <span class=\"hljs-string\">\"]]&gt;&lt;/OpenID&gt;&lt;/xml&gt;\"</span>;<br>    <span class=\"hljs-keyword\">var</span> option = {<br>        url: url.resolve(baseUrl, <span class=\"hljs-string\">\"/wechat?signature=\"</span> + signature + <span class=\"hljs-string\">\"&amp;timestamp=\"</span> + timestamp + <span class=\"hljs-string\">\"&amp;nonce=\"</span> + nonce),<br>        body: xml<br>    };<br>    request.post(option, (err, res, body) =&gt; {<br>        expect(err).to.be.equal(<span class=\"hljs-literal\">null</span>);<br>        request(baseUrl + <span class=\"hljs-string\">\"/api/wechat/unbindDevice?openId=\"</span> + config.openid + <span class=\"hljs-string\">\"&amp;deviceId=\"</span> + config.deviceid, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">err, res, body</span>) </span>{<br>            expect(err).to.be.equal(<span class=\"hljs-literal\">null</span>);<br>            expect(res.statusCode).to.be.equal(<span class=\"hljs-number\">200</span>);<br>            expect(body).to.be.equal(<span class=\"hljs-string\">'unbind totally success!'</span>);<br>            done();<br>        })<br>    });<br>});",
        "isRoot": true,
        "uuid": "e2419a54-1c25-40fc-bd3d-2ef9018d7c50",
        "parentUUID": "2cc8e5ad-aa14-4523-ac84-60b591e16cd7",
        "skipped": true
      }
    ],
    "pending": [],
    "root": true,
    "_timeout": 2000,
    "uuid": "2cc8e5ad-aa14-4523-ac84-60b591e16cd7",
    "fullFile": "",
    "file": "",
    "passes": [],
    "failures": [],
    "skipped": [
      {
        "title": "新增用户和绑定成功",
        "fullTitle": " 新增用户和绑定成功",
        "timedOut": false,
        "duration": 0,
        "pass": false,
        "fail": false,
        "pending": false,
        "code": "<span class=\"hljs-keyword\">var</span> xml = <span class=\"hljs-string\">\"&lt;xml&gt;&lt;URL&gt;&lt;![CDATA[http://test.tester.com/wechat/message]]&gt;&lt;/URL&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;ToUserName&gt;&lt;![CDATA[\"</span> + signature + <span class=\"hljs-string\">\"]]&gt;&lt;/ToUserName&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;FromUserName&gt;&lt;![CDATA[\"</span> + signature + <span class=\"hljs-string\">\"]]&gt;&lt;/FromUserName&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;CreateTime&gt;\"</span> + timestamp + <span class=\"hljs-string\">\"&lt;/CreateTime&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;MsgType&gt;&lt;![CDATA[device_event]]&gt;&lt;/MsgType&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;Event&gt;&lt;![CDATA[bind]]&gt;&lt;/Event&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;DeviceType&gt;&lt;![CDATA[\"</span> + signature + <span class=\"hljs-string\">\"]]&gt;&lt;/DeviceType&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;DeviceID&gt;&lt;![CDATA[\"</span> + config.deviceid + <span class=\"hljs-string\">\"]]&gt;&lt;/DeviceID&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;Content&gt;&lt;![CDATA[xxxxxxx]]&gt;&lt;/Content&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;SessionID&gt;123121&lt;/SessionID&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;OpenID&gt;&lt;![CDATA[\"</span> + signature + <span class=\"hljs-string\">\"]]&gt;&lt;/OpenID&gt;&lt;/xml&gt;\"</span>;<br><span class=\"hljs-keyword\">var</span> option = {<br>    url: url.resolve(baseUrl, <span class=\"hljs-string\">\"/wechat?signature=\"</span> + signature + <span class=\"hljs-string\">\"&amp;timestamp=\"</span> + timestamp + <span class=\"hljs-string\">\"&amp;nonce=\"</span> + nonce),<br>    body: xml<br>};<br>request.post(option, (err, res, body) =&gt; {<br>    expect(err).to.be.equal(<span class=\"hljs-literal\">null</span>);<br>    expect(res.statusCode).to.be.equal(<span class=\"hljs-number\">200</span>);<br>    expect(body).to.be.equal(<span class=\"hljs-string\">'create User and Bind success!'</span>);<br>    done();<br>});",
        "isRoot": true,
        "uuid": "6ba9b8b4-51e6-4494-9229-94f823c40e06",
        "parentUUID": "2cc8e5ad-aa14-4523-ac84-60b591e16cd7",
        "skipped": true
      },
      {
        "title": "已存在绑定关系",
        "fullTitle": " 已存在绑定关系",
        "timedOut": false,
        "duration": 0,
        "pass": false,
        "fail": false,
        "pending": false,
        "code": "<span class=\"hljs-keyword\">var</span> xml = <span class=\"hljs-string\">\"&lt;xml&gt;&lt;URL&gt;&lt;![CDATA[http://test.tester.com/wechat/message]]&gt;&lt;/URL&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;ToUserName&gt;&lt;![CDATA[\"</span> + signature + <span class=\"hljs-string\">\"]]&gt;&lt;/ToUserName&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;FromUserName&gt;&lt;![CDATA[\"</span> + signature + <span class=\"hljs-string\">\"]]&gt;&lt;/FromUserName&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;CreateTime&gt;\"</span> + timestamp + <span class=\"hljs-string\">\"&lt;/CreateTime&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;MsgType&gt;&lt;![CDATA[device_event]]&gt;&lt;/MsgType&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;Event&gt;&lt;![CDATA[bind]]&gt;&lt;/Event&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;DeviceType&gt;&lt;![CDATA[\"</span> + signature + <span class=\"hljs-string\">\"]]&gt;&lt;/DeviceType&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;DeviceID&gt;&lt;![CDATA[\"</span> + config.deviceid + <span class=\"hljs-string\">\"]]&gt;&lt;/DeviceID&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;Content&gt;&lt;![CDATA[xxxxxxx]]&gt;&lt;/Content&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;SessionID&gt;123121&lt;/SessionID&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;OpenID&gt;&lt;![CDATA[\"</span> + signature + <span class=\"hljs-string\">\"]]&gt;&lt;/OpenID&gt;&lt;/xml&gt;\"</span>;<br><span class=\"hljs-keyword\">var</span> option = {<br>    url: url.resolve(baseUrl, <span class=\"hljs-string\">\"/wechat?signature=\"</span> + signature + <span class=\"hljs-string\">\"&amp;timestamp=\"</span> + timestamp + <span class=\"hljs-string\">\"&amp;nonce=\"</span> + nonce),<br>    body: xml<br>};<br>request.post(option, (err, res, body) =&gt; {<br>    expect(err).to.be.equal(<span class=\"hljs-literal\">null</span>);<br>    expect(res.statusCode).to.be.equal(<span class=\"hljs-number\">500</span>);<br>    expect(body).to.be.equal(<span class=\"hljs-string\">'aleady binded!'</span>);<br>    done();<br>});",
        "isRoot": true,
        "uuid": "04fdceeb-b764-49f1-942a-8635b15eaab2",
        "parentUUID": "2cc8e5ad-aa14-4523-ac84-60b591e16cd7",
        "skipped": true
      },
      {
        "title": "缺少签名认证",
        "fullTitle": " 缺少签名认证",
        "timedOut": false,
        "duration": 0,
        "pass": false,
        "fail": false,
        "pending": false,
        "code": "<span class=\"hljs-keyword\">var</span> xml = <span class=\"hljs-string\">\"&lt;xml&gt;&lt;URL&gt;&lt;![CDATA[http://6f7930fa.ittun.com/wechat/message]]&gt;&lt;/URL&gt;&lt;ToUserName&gt;&lt;![CDATA[gh_9a0ccaa5f56d]]&gt;&lt;/ToUserName&gt;&lt;FromUserName&gt;&lt;![CDATA[xxxxxxx]]&gt;&lt;/FromUserName&gt;&lt;CreateTime&gt;123424235&lt;/CreateTime&gt;&lt;MsgType&gt;&lt;![CDATA[device_event]]&gt;&lt;/MsgType&gt;&lt;Event&gt;&lt;![CDATA[bind]]&gt;&lt;/Event&gt;&lt;DeviceType&gt;&lt;![CDATA[gh_9a0ccaa5f56d]]&gt;&lt;/DeviceType&gt;&lt;DeviceID&gt;&lt;![CDATA[gh_9a0ccaa5f56d_e0cf1c8d5aca1454]]&gt;&lt;/DeviceID&gt;&lt;Content&gt;&lt;![CDATA[xxxxxxx]]&gt;&lt;/Content&gt;&lt;SessionID&gt;123121&lt;/SessionID&gt;&lt;OpenID&gt;&lt;![CDATA[dsf23d2]]&gt;&lt;/OpenID&gt;&lt;/xml&gt;\"</span>;<br><span class=\"hljs-keyword\">var</span> option = {<br>    url: url.resolve(baseUrl, <span class=\"hljs-string\">\"/wechat?signature=\"</span> + signature + <span class=\"hljs-string\">\"&amp;timestamp=\"</span> + timestamp),<br>    body: xml<br>};<br>request.post(option, (err, res, body) =&gt; {<br>    expect(err).to.be.equal(<span class=\"hljs-literal\">null</span>);<br>    expect(res.statusCode).to.be.equal(<span class=\"hljs-number\">401</span>);<br>    done();<br>});",
        "isRoot": true,
        "uuid": "e2917f00-d7bd-4938-90a2-bd0195b01678",
        "parentUUID": "2cc8e5ad-aa14-4523-ac84-60b591e16cd7",
        "skipped": true
      },
      {
        "title": "解绑事件测试",
        "fullTitle": " 解绑事件测试",
        "timedOut": false,
        "duration": 0,
        "pass": false,
        "fail": false,
        "pending": false,
        "code": "<span class=\"hljs-keyword\">var</span> xml = <span class=\"hljs-string\">\"&lt;xml&gt;&lt;URL&gt;&lt;![CDATA[http://test.tester.com/wechat/message]]&gt;&lt;/URL&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;ToUserName&gt;&lt;![CDATA[\"</span> + signature + <span class=\"hljs-string\">\"]]&gt;&lt;/ToUserName&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;FromUserName&gt;&lt;![CDATA[\"</span> + signature + <span class=\"hljs-string\">\"]]&gt;&lt;/FromUserName&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;CreateTime&gt;\"</span> + timestamp + <span class=\"hljs-string\">\"&lt;/CreateTime&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;MsgType&gt;&lt;![CDATA[device_event]]&gt;&lt;/MsgType&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;Event&gt;&lt;![CDATA[unbind]]&gt;&lt;/Event&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;DeviceType&gt;&lt;![CDATA[\"</span> + signature + <span class=\"hljs-string\">\"]]&gt;&lt;/DeviceType&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;DeviceID&gt;&lt;![CDATA[\"</span> + config.deviceid + <span class=\"hljs-string\">\"]]&gt;&lt;/DeviceID&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;Content&gt;&lt;![CDATA[xxxxxxx]]&gt;&lt;/Content&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;SessionID&gt;123121&lt;/SessionID&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;OpenID&gt;&lt;![CDATA[\"</span> + signature + <span class=\"hljs-string\">\"]]&gt;&lt;/OpenID&gt;&lt;/xml&gt;\"</span>;<br><span class=\"hljs-keyword\">var</span> option = {<br>    url: url.resolve(baseUrl, <span class=\"hljs-string\">\"/wechat?signature=\"</span> + signature + <span class=\"hljs-string\">\"&amp;timestamp=\"</span> + timestamp + <span class=\"hljs-string\">\"&amp;nonce=\"</span> + nonce),<br>    body: xml<br>};<br>request.post(option, (err, res, body) =&gt; {<br>    expect(err).to.be.equal(<span class=\"hljs-literal\">null</span>);<br>    expect(res.statusCode).to.be.equal(<span class=\"hljs-number\">200</span>);<br>    expect(body).to.be.equal(<span class=\"hljs-string\">'unbind success!'</span>);<br>    done();<br>});",
        "isRoot": true,
        "uuid": "cdb1a0a1-0e35-45a5-832c-91b72af25c53",
        "parentUUID": "2cc8e5ad-aa14-4523-ac84-60b591e16cd7",
        "skipped": true
      },
      {
        "title": "解绑不存在的设备",
        "fullTitle": " 解绑不存在的设备",
        "timedOut": false,
        "duration": 0,
        "pass": false,
        "fail": false,
        "pending": false,
        "code": "<span class=\"hljs-keyword\">var</span> xml = <span class=\"hljs-string\">\"&lt;xml&gt;&lt;URL&gt;&lt;![CDATA[http://test.tester.com/wechat/message]]&gt;&lt;/URL&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;ToUserName&gt;&lt;![CDATA[\"</span> + signature + <span class=\"hljs-string\">\"]]&gt;&lt;/ToUserName&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;FromUserName&gt;&lt;![CDATA[\"</span> + signature + <span class=\"hljs-string\">\"]]&gt;&lt;/FromUserName&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;CreateTime&gt;\"</span> + timestamp + <span class=\"hljs-string\">\"&lt;/CreateTime&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;MsgType&gt;&lt;![CDATA[device_event]]&gt;&lt;/MsgType&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;Event&gt;&lt;![CDATA[unbind]]&gt;&lt;/Event&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;DeviceType&gt;&lt;![CDATA[\"</span> + signature + <span class=\"hljs-string\">\"]]&gt;&lt;/DeviceType&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;DeviceID&gt;&lt;![CDATA[\"</span> + signature + <span class=\"hljs-string\">\"]]&gt;&lt;/DeviceID&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;Content&gt;&lt;![CDATA[xxxxxxx]]&gt;&lt;/Content&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;SessionID&gt;123121&lt;/SessionID&gt;\"</span> +<br>    <span class=\"hljs-string\">\"&lt;OpenID&gt;&lt;![CDATA[\"</span> + signature + <span class=\"hljs-string\">\"]]&gt;&lt;/OpenID&gt;&lt;/xml&gt;\"</span>;<br><span class=\"hljs-keyword\">var</span> option = {<br>    url: url.resolve(baseUrl, <span class=\"hljs-string\">\"/wechat?signature=\"</span> + signature + <span class=\"hljs-string\">\"&amp;timestamp=\"</span> + timestamp + <span class=\"hljs-string\">\"&amp;nonce=\"</span> + nonce),<br>    body: xml<br>};<br>request.post(option, (err, res, body) =&gt; {<br>    expect(err).to.be.equal(<span class=\"hljs-literal\">null</span>);<br>    expect(res.statusCode).to.be.equal(<span class=\"hljs-number\">500</span>);<br>    expect(body).to.be.equal(<span class=\"hljs-string\">'no bund relation!'</span>);<br>    done();<br>});",
        "isRoot": true,
        "uuid": "184c398f-7058-4700-ad1c-9a00899a4a04",
        "parentUUID": "2cc8e5ad-aa14-4523-ac84-60b591e16cd7",
        "skipped": true
      },
      {
        "title": "解绑设备",
        "fullTitle": " 解绑设备",
        "timedOut": false,
        "duration": 0,
        "pass": false,
        "fail": false,
        "pending": false,
        "code": "<span class=\"hljs-keyword\">var</span> wechatAPI = <span class=\"hljs-keyword\">new</span> WeChatAPI(config.appid, config.appsecret);<br>wechatAPI.compelBindDevice(config.deviceid, config.openid, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">err</span>) </span>{<br>    expect(err).to.be.equal(<span class=\"hljs-literal\">null</span>);<br>    <span class=\"hljs-keyword\">var</span> xml = <span class=\"hljs-string\">\"&lt;xml&gt;&lt;URL&gt;&lt;![CDATA[http://test.tester.com/wechat/message]]&gt;&lt;/URL&gt;\"</span> +<br>        <span class=\"hljs-string\">\"&lt;ToUserName&gt;&lt;![CDATA[\"</span> + config.devicetype + <span class=\"hljs-string\">\"]]&gt;&lt;/ToUserName&gt;\"</span> +<br>        <span class=\"hljs-string\">\"&lt;FromUserName&gt;&lt;![CDATA[\"</span> + config.openid + <span class=\"hljs-string\">\"]]&gt;&lt;/FromUserName&gt;\"</span> +<br>        <span class=\"hljs-string\">\"&lt;CreateTime&gt;\"</span> + timestamp + <span class=\"hljs-string\">\"&lt;/CreateTime&gt;\"</span> +<br>        <span class=\"hljs-string\">\"&lt;MsgType&gt;&lt;![CDATA[device_event]]&gt;&lt;/MsgType&gt;\"</span> +<br>        <span class=\"hljs-string\">\"&lt;Event&gt;&lt;![CDATA[bind]]&gt;&lt;/Event&gt;\"</span> +<br>        <span class=\"hljs-string\">\"&lt;DeviceType&gt;&lt;![CDATA[\"</span> + config.devicetype + <span class=\"hljs-string\">\"]]&gt;&lt;/DeviceType&gt;\"</span> +<br>        <span class=\"hljs-string\">\"&lt;DeviceID&gt;&lt;![CDATA[\"</span> + config.deviceid + <span class=\"hljs-string\">\"]]&gt;&lt;/DeviceID&gt;\"</span> +<br>        <span class=\"hljs-string\">\"&lt;Content&gt;&lt;![CDATA[xxxxxxx]]&gt;&lt;/Content&gt;\"</span> +<br>        <span class=\"hljs-string\">\"&lt;SessionID&gt;123121&lt;/SessionID&gt;\"</span> +<br>        <span class=\"hljs-string\">\"&lt;OpenID&gt;&lt;![CDATA[\"</span> + config.openid + <span class=\"hljs-string\">\"]]&gt;&lt;/OpenID&gt;&lt;/xml&gt;\"</span>;<br>    <span class=\"hljs-keyword\">var</span> option = {<br>        url: url.resolve(baseUrl, <span class=\"hljs-string\">\"/wechat?signature=\"</span> + signature + <span class=\"hljs-string\">\"&amp;timestamp=\"</span> + timestamp + <span class=\"hljs-string\">\"&amp;nonce=\"</span> + nonce),<br>        body: xml<br>    };<br>    request.post(option, (err, res, body) =&gt; {<br>        expect(err).to.be.equal(<span class=\"hljs-literal\">null</span>);<br>        request(baseUrl + <span class=\"hljs-string\">\"/api/wechat/unbindDevice?openId=\"</span> + config.openid + <span class=\"hljs-string\">\"&amp;deviceId=\"</span> + config.deviceid, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">err, res, body</span>) </span>{<br>            expect(err).to.be.equal(<span class=\"hljs-literal\">null</span>);<br>            expect(res.statusCode).to.be.equal(<span class=\"hljs-number\">200</span>);<br>            expect(body).to.be.equal(<span class=\"hljs-string\">'unbind totally success!'</span>);<br>            done();<br>        })<br>    });<br>});",
        "isRoot": true,
        "uuid": "e2419a54-1c25-40fc-bd3d-2ef9018d7c50",
        "parentUUID": "2cc8e5ad-aa14-4523-ac84-60b591e16cd7",
        "skipped": true
      }
    ],
    "hasTests": true,
    "hasSuites": true,
    "totalTests": 6,
    "totalPasses": 0,
    "totalFailures": 0,
    "totalPending": 0,
    "totalSkipped": 6,
    "hasPasses": false,
    "hasFailures": false,
    "hasPending": false,
    "hasSkipped": true,
    "duration": 0,
    "rootEmpty": false
  },
  "allTests": [
    {
      "title": "查询成功",
      "fullTitle": "配置信息 查询成功",
      "timedOut": false,
      "duration": 30,
      "state": "passed",
      "speed": "fast",
      "pass": true,
      "fail": false,
      "pending": false,
      "code": "request(baseUrl + <span class=\"hljs-string\">'/api/wechat/getJsApiConfig'</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">err, res, body</span>) </span>{<br>    expect(err).to.be.equal(<span class=\"hljs-literal\">null</span>);<br>    expect(res.statusCode).to.be.equal(<span class=\"hljs-number\">200</span>);<br>    done();<br>})",
      "isRoot": false,
      "uuid": "6d35074b-c48f-4fb2-93f2-7067307f70fa",
      "parentUUID": "8e147a17-375d-46fd-a9cd-5fce4a406e34",
      "skipped": false
    }
  ],
  "allPending": [],
  "allPasses": [
    {
      "title": "查询成功",
      "fullTitle": "配置信息 查询成功",
      "timedOut": false,
      "duration": 30,
      "state": "passed",
      "speed": "fast",
      "pass": true,
      "fail": false,
      "pending": false,
      "code": "request(baseUrl + <span class=\"hljs-string\">'/api/wechat/getJsApiConfig'</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">err, res, body</span>) </span>{<br>    expect(err).to.be.equal(<span class=\"hljs-literal\">null</span>);<br>    expect(res.statusCode).to.be.equal(<span class=\"hljs-number\">200</span>);<br>    done();<br>})",
      "isRoot": false,
      "uuid": "66197b7d-3732-4e02-9e80-3d8c9566f291",
      "parentUUID": "8e147a17-375d-46fd-a9cd-5fce4a406e34",
      "skipped": false
    }
  ],
  "allFailures": [],
  "copyrightYear": 2016
}